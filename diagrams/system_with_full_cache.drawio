<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.3.0 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.3.0">
  <diagram name="System With Full Cache" id="system-with-cache">
    <mxGraphModel dx="933" dy="697" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#000000;labelBackgroundColor=#FFFFCC;" value="System Workflow WITH Full Ollama Cache" vertex="1">
          <mxGeometry height="40" width="800" x="400" y="20" as="geometry" />
        </mxCell>
        <mxCell id="gen-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=3;dashed=1;fontColor=#000000;" value="" vertex="1">
          <mxGeometry height="800" width="360" x="80" y="130" as="geometry" />
        </mxCell>
        <mxCell id="gen-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#000000;" value="PHASE 1: ONE-TIME CACHE GENERATION" vertex="1">
          <mxGeometry height="30" width="340" x="90" y="140" as="geometry" />
        </mxCell>
        <mxCell id="gen-time" parent="1" style="text;html=1;strokeColor=none;fillColor=#ffe6cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#000000;" value="â± Time: 90-120 minutes (once)" vertex="1">
          <mxGeometry height="25" width="300" x="100" y="175" as="geometry" />
        </mxCell>
        <mxCell id="gen-script" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;fontColor=#000000;" value="generate_real_data.py&#xa;&#xa;Loop: 5000 jobs Ã— 4 prompts&#xa;= 20,000 pairs" vertex="1">
          <mxGeometry height="70" width="280" x="120" y="220" as="geometry" />
        </mxCell>
        <mxCell id="gen-step1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;fontSize=11;fontColor=#000000;" value="1. Load HDFS jobs&#xa;   (5000 log entries)" vertex="1">
          <mxGeometry height="50" width="280" x="120" y="310" as="geometry" />
        </mxCell>
        <mxCell id="gen-step2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;fontSize=11;fontColor=#000000;" value="2. Load 4 prompt templates&#xa;   [simple, standard, fewshot_1, fewshot_3]" vertex="1">
          <mxGeometry height="50" width="280" x="120" y="375" as="geometry" />
        </mxCell>
        <mxCell id="gen-step3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;fontSize=11;fontStyle=1;fontColor=#000000;" value="3. For each (job, prompt) pair:&#xa;   â€¢ Check cache (skip if exists)&#xa;   â€¢ Call Ollama API&#xa;   â€¢ Save to cache/{hash}.json" vertex="1">
          <mxGeometry height="80" width="280" x="120" y="440" as="geometry" />
        </mxCell>
        <mxCell id="ollama-api" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1;fontColor=#000000;" value="ðŸŒ Ollama API&#xa;(Local LLM)&#xa;&#xa;Model: gemma3&#xa;~3 sec/call" vertex="1">
          <mxGeometry height="80" width="240" x="140" y="540" as="geometry" />
        </mxCell>
        <mxCell id="cache-result" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1;fontColor=#000000;" value="ðŸ“ results/ollama_cache/&#xa;&#xa;Creates ~20,000 JSON files:&#xa;{hash}.json â†’ {label, response}" vertex="1">
          <mxGeometry height="80" width="280" x="120" y="640" as="geometry" />
        </mxCell>
        <mxCell id="gen-output" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontColor=#000000;" value="âœ… OUTPUT:&#xa;20,000 cached LLM responses&#xa;Ready for instant reuse!" vertex="1">
          <mxGeometry height="70" width="280" x="120" y="750" as="geometry" />
        </mxCell>
        <mxCell id="arrow-gen-train" edge="1" parent="1" source="gen-output" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=5;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;fontColor=#000000;" target="train-box" value="Cache ready â†’ Fast training">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="460" y="785" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="train-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=3;dashed=1;fontColor=#000000;" value="" vertex="1">
          <mxGeometry height="920" width="1040" x="480" y="160" as="geometry" />
        </mxCell>
        <mxCell id="Vit9XqxlvObSWsaiL34m-3" edge="1" parent="1" source="train-title" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" value="">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="800" y="95" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="train-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#000000;" value="PHASE 2: FAST TRAINING AND OPTIMIZATION (Repeatable)" vertex="1">
          <mxGeometry height="30" width="1020" x="490" y="140" as="geometry" />
        </mxCell>
        <mxCell id="train-time" parent="1" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#000000;" value="âš¡ Time: 10-15 seconds per run (NO API CALLS)" vertex="1">
          <mxGeometry height="25" width="700" x="650" y="175" as="geometry" />
        </mxCell>
        <mxCell id="train-step1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;align=left;fontColor=#000000;" value="1. create_training_data()&#xa;   GROUNDING_RATIO = 1.0 âœ“" vertex="1">
          <mxGeometry height="60" width="280" x="520" y="220" as="geometry" />
        </mxCell>
        <mxCell id="train-loop" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;fontColor=#000000;" value="Loop: 20,000 job-prompt pairs&#xa;&#xa;For each pair:&#xa;  âœ“ query_gemini(job, prompt)&#xa;  âœ“ Checks cache FIRST&#xa;  âœ“ Returns instantly (no API wait)&#xa;  âœ“ label = 1 if correct, 0 if wrong&#xa;&#xa;Result: X (20000Ã—7), y (20000Ã—1)" vertex="1">
          <mxGeometry height="160" width="280" x="520" y="300" as="geometry" />
        </mxCell>
        <mxCell id="cache-hit" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1;fontColor=#000000;" value="ðŸ“ Cache Hit (100%)&#xa;&#xa;All 20,000 pairs cached&#xa;0 API calls needed" vertex="1">
          <mxGeometry height="80" width="200" x="840" y="300" as="geometry" />
        </mxCell>
        <mxCell id="arrow-cache-hit" edge="1" parent="1" source="train-loop" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#e1d5e7;strokeColor=#9673a6;dashed=1;fontColor=#000000;" target="cache-hit" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="train-step2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;align=left;fontColor=#000000;" value="2. train_predictor(X, y)&#xa;   XGBoost on 100% REAL data&#xa;   Expected: 85%+ accuracy" vertex="1">
          <mxGeometry height="70" width="280" x="520" y="480" as="geometry" />
        </mxCell>
        <mxCell id="arrow-train1" edge="1" parent="1" source="train-loop" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;" target="train-step2" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="train-step3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;align=left;fontColor=#000000;" value="3. predict_probabilities()&#xa;   P(success | job, prompt)&#xa;   Matrix: 5000 Ã— 4" vertex="1">
          <mxGeometry height="70" width="280" x="520" y="570" as="geometry" />
        </mxCell>
        <mxCell id="arrow-train2" edge="1" parent="1" source="train-step2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#000000;" target="train-step3" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="opt-baseline" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontColor=#000000;" value="Baseline&#xa;(4 strategies)&#xa;&#xa;Each prompt&#xa;for ALL jobs" vertex="1">
          <mxGeometry height="90" width="120" x="520" y="680" as="geometry" />
        </mxCell>
        <mxCell id="opt-random" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontColor=#000000;" value="Random&#xa;Search&#xa;&#xa;1000 iter" vertex="1">
          <mxGeometry height="90" width="100" x="660" y="680" as="geometry" />
        </mxCell>
        <mxCell id="opt-nsga2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;fontColor=#000000;" value="NSGA-II&#xa;&#xa;Pop: 100&#xa;Gen: 50&#xa;&#xa;BEST!" vertex="1">
          <mxGeometry height="90" width="100" x="780" y="680" as="geometry" />
        </mxCell>
        <mxCell id="opt-spea2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontColor=#000000;" value="SPEA2&#xa;&#xa;Archive&#xa;based" vertex="1">
          <mxGeometry height="90" width="100" x="900" y="680" as="geometry" />
        </mxCell>
        <mxCell id="arrow-opt1" edge="1" parent="1" source="train-step3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#e1d5e7;strokeColor=#9673a6;dashed=1;fontColor=#000000;" target="opt-baseline" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-opt2" edge="1" parent="1" source="train-step3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontColor=#000000;" target="opt-random" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-opt3" edge="1" parent="1" source="train-step3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontColor=#000000;" target="opt-nsga2" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-opt4" edge="1" parent="1" source="train-step3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontColor=#000000;" target="opt-spea2" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="results" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;align=left;fontColor=#000000;" value="4. Pareto Front Extraction&#xa;   + Metrics (IGD, Î”, Mâ‚™)&#xa;   + Visualization" vertex="1">
          <mxGeometry height="60" width="480" x="520" y="800" as="geometry" />
        </mxCell>
        <mxCell id="arrow-results1" edge="1" parent="1" source="opt-baseline" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;" target="results" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-results2" edge="1" parent="1" source="opt-spea2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;" target="results" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="output-final" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1;align=left;fontColor=#000000;" value="ðŸ“Š Final Outputs:&#xa;â€¢ tables/baseline_results.csv&#xa;â€¢ tables/table3_optimizer_comparison.csv&#xa;â€¢ figures/pareto_with_baselines.png" vertex="1">
          <mxGeometry height="70" width="480" x="520" y="880" as="geometry" />
        </mxCell>
        <mxCell id="arrow-final" edge="1" parent="1" source="results" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" target="output-final" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="benefits-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontColor=#000000;" value="" vertex="1">
          <mxGeometry height="430" width="400" x="1080" y="220" as="geometry" />
        </mxCell>
        <mxCell id="benefits-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#000000;" value="âœ… KEY BENEFITS" vertex="1">
          <mxGeometry height="30" width="380" x="1090" y="230" as="geometry" />
        </mxCell>
        <mxCell id="benefit1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1;fontColor=#000000;" value="1. 100% Real LLM Data&#xa;   No synthetic heuristics&#xa;   Learns actual LLM behavior" vertex="1">
          <mxGeometry height="60" width="360" x="1100" y="270" as="geometry" />
        </mxCell>
        <mxCell id="benefit2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1;fontColor=#000000;" value="2. Higher Accuracy&#xa;   Expected: 79% â†’ 85%+&#xa;   Better predictions" vertex="1">
          <mxGeometry height="60" width="360" x="1100" y="345" as="geometry" />
        </mxCell>
        <mxCell id="benefit3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1;fontColor=#000000;" value="3. Instant Reruns&#xa;   0 API calls after cache&#xa;   10 sec vs 60 sec" vertex="1">
          <mxGeometry height="60" width="360" x="1100" y="420" as="geometry" />
        </mxCell>
        <mxCell id="benefit4" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1;fontColor=#000000;" value="4. Reproducible Experiments&#xa;   Same cache â†’ same results&#xa;   Scientific rigor" vertex="1">
          <mxGeometry height="60" width="360" x="1100" y="495" as="geometry" />
        </mxCell>
        <mxCell id="benefit5" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1;fontColor=#000000;" value="5. Fast Iteration&#xa;   Tune hyperparameters instantly&#xa;   Test 100 configs in 20 min" vertex="1">
          <mxGeometry height="60" width="360" x="1100" y="570" as="geometry" />
        </mxCell>
        <mxCell id="Vit9XqxlvObSWsaiL34m-1" edge="1" parent="1" source="compare-box" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="train-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="compare-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;fontColor=#000000;" value="" vertex="1">
          <mxGeometry height="270" width="400" x="1080" y="660" as="geometry" />
        </mxCell>
        <mxCell id="compare-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#000000;" value="ðŸ“Š BEFORE vs AFTER" vertex="1">
          <mxGeometry height="30" width="380" x="1100" y="665" as="geometry" />
        </mxCell>
        <mxCell id="compare-header" parent="1" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Courier New;fontColor=#000000;" value="Metric              | Before (5%) | After (100%)" vertex="1">
          <mxGeometry height="25" width="360" x="1100" y="700" as="geometry" />
        </mxCell>
        <mxCell id="compare-row1" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New;fontColor=#000000;" value="Real Training Data  |    1,000    |   20,000" vertex="1">
          <mxGeometry height="20" width="360" x="1100" y="730" as="geometry" />
        </mxCell>
        <mxCell id="compare-row2" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New;fontColor=#000000;" value="Synthetic Data      |   19,000    |       0" vertex="1">
          <mxGeometry height="20" width="360" x="1100" y="755" as="geometry" />
        </mxCell>
        <mxCell id="compare-row3" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New;fontColor=#000000;" value="Model Accuracy      |     79%     |   85%+" vertex="1">
          <mxGeometry height="20" width="360" x="1100" y="780" as="geometry" />
        </mxCell>
        <mxCell id="compare-row4" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New;fontColor=#000000;" value="API Calls/Run       |    1,000    |       0" vertex="1">
          <mxGeometry height="20" width="360" x="1100" y="805" as="geometry" />
        </mxCell>
        <mxCell id="compare-row5" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New;fontColor=#000000;" value="Training Time       |   60 sec    |   10 sec" vertex="1">
          <mxGeometry height="20" width="360" x="1100" y="830" as="geometry" />
        </mxCell>
        <mxCell id="compare-row6" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New;fontColor=#000000;" value="Cache Files         |    1,000    |  20,000" vertex="1">
          <mxGeometry height="20" width="360" x="1100" y="855" as="geometry" />
        </mxCell>
        <mxCell id="compare-row7" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New;fontColor=#000000;" value="Setup Cost          |   5 min     | 120 min (once)" vertex="1">
          <mxGeometry height="20" width="360" x="1100" y="880" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
