<mxfile host="app.diagrams.net" modified="2026-01-19T00:00:00.000Z">
  <diagram name="System With Full Cache" id="system-with-cache">
    <mxGraphModel dx="1434" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="System Workflow WITH Full Ollama Cache" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="subtitle" value="After running: python generate_real_data.py 5000 (ONE-TIME SETUP)" style="text;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="500" y="65" width="600" height="30" as="geometry" />
        </mxCell>
        
        <!-- LEFT: One-Time Cache Generation -->
        <mxCell id="gen-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=3;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="130" width="360" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="gen-title" value="PHASE 1: ONE-TIME CACHE GENERATION" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="90" y="140" width="340" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="gen-time" value="â± Time: 90-120 minutes (once)" style="text;html=1;strokeColor=none;fillColor=#ffe6cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="175" width="300" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="gen-script" value="generate_real_data.py&#xa;&#xa;Loop: 5000 jobs Ã— 4 prompts&#xa;= 20,000 pairs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="220" width="280" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="gen-step1" value="1. Load HDFS jobs&#xa;   (5000 log entries)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="120" y="310" width="280" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="gen-step2" value="2. Load 4 prompt templates&#xa;   [simple, standard, fewshot_1, fewshot_3]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=left;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="120" y="375" width="280" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="gen-step3" value="3. For each (job, prompt) pair:&#xa;   â€¢ Check cache (skip if exists)&#xa;   â€¢ Call Ollama API&#xa;   â€¢ Save to cache/{hash}.json" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="440" width="280" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="ollama-api" value="ðŸŒ Ollama API&#xa;(Local LLM)&#xa;&#xa;Model: gemma3&#xa;~3 sec/call" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="140" y="540" width="240" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="cache-result" value="ðŸ“ results/ollama_cache/&#xa;&#xa;Creates ~20,000 JSON files:&#xa;{hash}.json â†’ {label, response}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="640" width="280" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="gen-output" value="âœ… OUTPUT:&#xa;20,000 cached LLM responses&#xa;Ready for instant reuse!" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="750" width="280" height="70" as="geometry" />
        </mxCell>
        
        <!-- Arrow from gen to training -->
        <mxCell id="arrow-gen-train" value="Cache ready â†’ Fast training" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=5;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" edge="1" parent="1" source="gen-output" target="train-box">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="460" y="785" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- RIGHT: Fast Repeated Training -->
        <mxCell id="train-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=3;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="130" width="1040" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="train-title" value="PHASE 2: FAST TRAINING AND OPTIMIZATION (Repeatable)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="490" y="140" width="1020" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="train-time" value="âš¡ Time: 10-15 seconds per run (NO API CALLS)" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="650" y="175" width="700" height="25" as="geometry" />
        </mxCell>
        
        <!-- Training Flow -->
        <mxCell id="train-step1" value="1. create_training_data()&#xa;   GROUNDING_RATIO = 1.0 âœ“" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="520" y="220" width="280" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="train-loop" value="Loop: 20,000 job-prompt pairs&#xa;&#xa;For each pair:&#xa;  âœ“ query_gemini(job, prompt)&#xa;  âœ“ Checks cache FIRST&#xa;  âœ“ Returns instantly (no API wait)&#xa;  âœ“ label = 1 if correct, 0 if wrong&#xa;&#xa;Result: X (20000Ã—7), y (20000Ã—1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="520" y="300" width="280" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="cache-hit" value="ðŸ“ Cache Hit (100%)&#xa;&#xa;All 20,000 pairs cached&#xa;0 API calls needed" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="840" y="300" width="200" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-cache-hit" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#e1d5e7;strokeColor=#9673a6;dashed=1" edge="1" parent="1" source="train-loop" target="cache-hit">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="train-step2" value="2. train_predictor(X, y)&#xa;   XGBoost on 100% REAL data&#xa;   Expected: 85%+ accuracy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="520" y="480" width="280" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-train1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="train-loop" target="train-step2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="train-step3" value="3. predict_probabilities()&#xa;   P(success | job, prompt)&#xa;   Matrix: 5000 Ã— 4" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="520" y="570" width="280" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-train2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="train-step2" target="train-step3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Optimization -->
        <mxCell id="opt-baseline" value="Baseline&#xa;(4 strategies)&#xa;&#xa;Each prompt&#xa;for ALL jobs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="520" y="680" width="120" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="opt-random" value="Random&#xa;Search&#xa;&#xa;1000 iter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="660" y="680" width="100" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="opt-nsga2" value="NSGA-II&#xa;&#xa;Pop: 100&#xa;Gen: 50&#xa;&#xa;BEST!" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="780" y="680" width="100" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="opt-spea2" value="SPEA2&#xa;&#xa;Archive&#xa;based" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="900" y="680" width="100" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-opt1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#e1d5e7;strokeColor=#9673a6;dashed=1" edge="1" parent="1" source="train-step3" target="opt-baseline">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-opt2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1" edge="1" parent="1" source="train-step3" target="opt-random">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-opt3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1" edge="1" parent="1" source="train-step3" target="opt-nsga2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-opt4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1" edge="1" parent="1" source="train-step3" target="opt-spea2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Results -->
        <mxCell id="results" value="4. Pareto Front Extraction&#xa;   + Metrics (IGD, Î”, Mâ‚™)&#xa;   + Visualization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="520" y="800" width="480" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-results1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#fff2cc;strokeColor=#d6b656;" edge="1" parent="1" source="opt-baseline" target="results">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-results2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#fff2cc;strokeColor=#d6b656;" edge="1" parent="1" source="opt-spea2" target="results">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="output-final" value="ðŸ“Š Final Outputs:&#xa;â€¢ tables/baseline_results.csv&#xa;â€¢ tables/table3_optimizer_comparison.csv&#xa;â€¢ figures/pareto_with_baselines.png" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1;align=left" vertex="1" parent="1">
          <mxGeometry x="520" y="880" width="480" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow-final" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#e1d5e7;strokeColor=#9673a6;" edge="1" parent="1" source="results" target="output-final">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Key Benefits Box -->
        <mxCell id="benefits-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1080" y="220" width="400" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="benefits-title" value="âœ… KEY BENEFITS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1090" y="230" width="380" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="benefit1" value="1. 100% Real LLM Data&#xa;   No synthetic heuristics&#xa;   Learns actual LLM behavior" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1100" y="270" width="360" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="benefit2" value="2. Higher Accuracy&#xa;   Expected: 79% â†’ 85%+&#xa;   Better predictions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1100" y="345" width="360" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="benefit3" value="3. Instant Reruns&#xa;   0 API calls after cache&#xa;   10 sec vs 60 sec" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1100" y="420" width="360" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="benefit4" value="4. Reproducible Experiments&#xa;   Same cache â†’ same results&#xa;   Scientific rigor" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1100" y="495" width="360" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="benefit5" value="5. Fast Iteration&#xa;   Tune hyperparameters instantly&#xa;   Test 100 configs in 20 min" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1100" y="570" width="360" height="60" as="geometry" />
        </mxCell>
        
        <!-- Comparison Table -->
        <mxCell id="compare-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1080" y="650" width="400" height="280" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-title" value="ðŸ“Š BEFORE vs AFTER" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1090" y="660" width="380" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-header" value="Metric              | Before (5%) | After (100%)" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="700" width="360" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-row1" value="Real Training Data  |    1,000    |   20,000" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="730" width="360" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-row2" value="Synthetic Data      |   19,000    |       0" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="755" width="360" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-row3" value="Model Accuracy      |     79%     |   85%+" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="780" width="360" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-row4" value="API Calls/Run       |    1,000    |       0" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="805" width="360" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-row5" value="Training Time       |   60 sec    |   10 sec" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="830" width="360" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-row6" value="Cache Files         |    1,000    |  20,000" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="855" width="360" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="compare-row7" value="Setup Cost          |   5 min     | 120 min (once)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="880" width="360" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
