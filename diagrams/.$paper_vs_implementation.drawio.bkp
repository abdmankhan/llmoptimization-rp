<mxfile host="app.diagrams.net" modified="2026-01-19T00:00:00.000Z">
  <diagram name="Paper vs Implementation" id="paper-vs-impl">
    <mxGraphModel dx="2000" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1400">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Main Title -->
        <mxCell id="title" value="Research Paper Theory vs Code Implementation" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="1200" height="50" as="geometry" />
        </mxCell>
        
        <!-- LEFT SIDE: PAPER THEORY -->
        <mxCell id="paper-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=4;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="880" height="1240" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-title" value="ðŸ“„ RESEARCH PAPER: &quot;Optimizing the Utilization of LLMs&quot;" style="text;html=1;strokeColor=none;fillColor=#9673a6;fontColor=#ffffff;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="840" height="40" as="geometry" />
        </mxCell>
        
        <!-- Paper Section 1: Problem Statement -->
        <mxCell id="paper-s1-title" value="1. PROBLEM STATEMENT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="180" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s1-content" value="â€¢ Multiple LLM models with different costs and capabilities&#xa;  Example: GPT-4 ($0.06/1K tokens) vs GPT-3.5 ($0.002/1K tokens)&#xa;&#xa;â€¢ Same task can be done by cheap OR expensive model&#xa;&#xa;â€¢ Challenge: Maximize accuracy while minimizing total cost&#xa;&#xa;â€¢ Trade-off: Cost â†” Accuracy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=12;align=left" vertex="1" parent="1">
          <mxGeometry x="120" y="220" width="800" height="130" as="geometry" />
        </mxCell>
        
        <!-- Paper Section 2: Proposed Solution -->
        <mxCell id="paper-s2-title" value="2. PROPOSED SOLUTION: ML-Based Predictor (MLBP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="370" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s2-step1" value="Step 1: Ground Truth Collection&#xa;â€¢ Sample N tasks&#xa;â€¢ Query ALL models for each task&#xa;â€¢ Record: model_i correctly classified task_j? (YES/NO)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="415" width="760" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s2-step2" value="Step 2: Feature Extraction&#xa;â€¢ Task features: length, complexity, domain&#xa;â€¢ Model features: parameters, cost, capability" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="495" width="760" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s2-step3" value="Step 3: Train ML Predictor&#xa;â€¢ Input: (task, model) â†’ Features&#xa;â€¢ Output: P(model succeeds on task)&#xa;â€¢ Algorithm: Random Forest, XGBoost, Neural Net" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="560" width="760" height="65" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s2-step4" value="Step 4: Predict for New Tasks&#xa;â€¢ Given: new task + all models&#xa;â€¢ Predict: P(success) for each model&#xa;â€¢ Result: Probability matrix [N_tasks Ã— N_models]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="635" width="760" height="65" as="geometry" />
        </mxCell>
        
        <!-- Paper Section 3: Optimization -->
        <mxCell id="paper-s3-title" value="3. MULTI-OBJECTIVE OPTIMIZATION" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="720" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s3-obj" value="Objective 1: Maximize Total Accuracy = Î£ P(model_i succeeds on task_i)&#xa;Objective 2: Minimize Total Cost = Î£ cost(model_i, task_i)&#xa;&#xa;Constraint: Assign exactly ONE model to each task" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;align=left;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="140" y="765" width="760" height="75" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s3-algos" value="Multi-Objective Algorithms:&#xa;â€¢ NSGA-II (Non-dominated Sorting Genetic Algorithm)&#xa;â€¢ SPEA2 (Strength Pareto Evolutionary Algorithm)&#xa;â€¢ Random Search (baseline)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="850" width="760" height="75" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s3-result" value="Result: Pareto Front&#xa;â€¢ Set of non-dominated solutions&#xa;â€¢ Each point: (cost, accuracy) pair&#xa;â€¢ User picks based on budget/accuracy requirement" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="935" width="760" height="75" as="geometry" />
        </mxCell>
        
        <!-- Paper Section 4: Evaluation -->
        <mxCell id="paper-s4-title" value="4. EVALUATION METRICS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="1030" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s4-metrics" value="â€¢ IGD (Inverted Generational Distance): How close to reference Pareto front?&#xa;  Lower is better. 0 = perfect match.&#xa;&#xa;â€¢ Î” (Delta): How evenly spread are solutions on Pareto front?&#xa;  Lower is better. Good coverage of tradeoffs.&#xa;&#xa;â€¢ Mâ‚™ (Number of solutions): How many options does user have?&#xa;  Higher is better. More choices." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="1075" width="760" height="120" as="geometry" />
        </mxCell>
        
        <!-- Paper Section 5: Baselines -->
        <mxCell id="paper-s5-title" value="5. BASELINE STRATEGIES" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="1215" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="paper-s5-content" value="â€¢ Cheapest Model Only: Use GPT-3.5 for everything (low cost, low accuracy)&#xa;â€¢ Best Model Only: Use GPT-4 for everything (high cost, high accuracy)&#xa;â€¢ Random Assignment: Randomly assign models (baseline)&#xa;â€¢ Compare optimizers against these baselines" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left" vertex="1" parent="1">
          <mxGeometry x="140" y="1260" width="760" height="80" as="geometry" />
        </mxCell>
        
        
        <!-- RIGHT SIDE: IMPLEMENTATION -->
        <mxCell id="impl-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=4;" vertex="1" parent="1">
          <mxGeometry x="1040" y="100" width="880" height="1240" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-title" value="ðŸ’» CODE IMPLEMENTATION (Your Project)" style="text;html=1;strokeColor=none;fillColor=#6c8ebf;fontColor=#ffffff;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1060" y="120" width="840" height="40" as="geometry" />
        </mxCell>
        
        <!-- Impl Section 1: Problem Adaptation -->
        <mxCell id="impl-s1-title" value="1. PROBLEM ADAPTATION" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1080" y="180" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s1-content" value="â€¢ Instead of multiple MODELS â†’ Use multiple PROMPTS&#xa;  simple (10 tokens), standard (25), fewshot_1 (50), fewshot_3 (90)&#xa;&#xa;â€¢ Same LLM (Ollama gemma3) with different instruction complexity&#xa;&#xa;â€¢ Dataset: HDFS logs (5,000 jobs) with anomaly labels&#xa;&#xa;â€¢ Trade-off: Cost (tokens) â†” Accuracy (detection rate)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=12;align=left" vertex="1" parent="1">
          <mxGeometry x="1080" y="220" width="800" height="130" as="geometry" />
        </mxCell>
        
        <!-- Impl Section 2: MLBP Implementation -->
        <mxCell id="impl-s2-title" value="2. MLBP IMPLEMENTATION: predictors/mlbp.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1080" y="370" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s2-step1" value="create_training_data(jobs, prompts):&#xa;â€¢ Loop: 5000 jobs Ã— 4 prompts = 20,000 pairs&#xa;â€¢ For each pair: Call query_gemini(job, prompt) â†’ LLM prediction&#xa;â€¢ Compare with ground_truth â†’ label = 1 if correct, 0 if wrong&#xa;â€¢ Cache results to disk (results/ollama_cache/{hash}.json)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="415" width="760" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s2-step2" value="Feature Engineering (7 features):&#xa;â€¢ job[&quot;tokens&quot;], job[&quot;unique_tokens&quot;], job[&quot;has_error&quot;]&#xa;â€¢ prompt[&quot;tokens&quot;], prompt[&quot;id&quot;]&#xa;â€¢ job_tokens/prompt_tokens, job_tokens*prompt_tokens" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="515" width="760" height="75" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s2-step3" value="train_predictor(X, y):&#xa;â€¢ Algorithm: XGBoost (400 estimators, depth=8, lr=0.05)&#xa;â€¢ Input: X (20000Ã—7), y (20000Ã—1)&#xa;â€¢ Output: Trained model&#xa;â€¢ Current accuracy: 79%, Target: 85%+" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="600" width="760" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s2-step4" value="predict_probabilities(model, jobs, prompts):&#xa;â€¢ Predict for all (job, prompt) pairs&#xa;â€¢ Result: P(success) matrix [5000 Ã— 4]&#xa;â€¢ Used by optimizers to make decisions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="690" width="760" height="65" as="geometry" />
        </mxCell>
        
        <!-- Impl Section 3: Optimization -->
        <mxCell id="impl-s3-title" value="3. MULTI-OBJECTIVE OPTIMIZATION: optimizers/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1080" y="775" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s3-obj" value="Maximize: total_accuracy = Î£ P(prompt_i succeeds on job_i)&#xa;Minimize: total_cost = Î£ prompt_tokens[i]&#xa;&#xa;Constraint: Each job assigned exactly one prompt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;align=left;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="820" width="760" height="75" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s3-algos" value="Implemented Algorithms:&#xa;â€¢ random_search.py: 1000 random assignments&#xa;â€¢ nsga2.py: Pop=100, Gen=50 (BEST: IGD=0.0000)&#xa;â€¢ spea2.py: Archive-based, fitness sharing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="905" width="760" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s3-result" value="evaluation/pareto.py:&#xa;â€¢ Extract non-dominated solutions&#xa;â€¢ Pareto front: ~40 solutions for NSGA-II&#xa;â€¢ visualization/plots.py: Generate plots" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="985" width="760" height="70" as="geometry" />
        </mxCell>
        
        <!-- Impl Section 4: Evaluation -->
        <mxCell id="impl-s4-title" value="4. EVALUATION: evaluation/metrics.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1080" y="1075" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s4-metrics" value="compute_igd(pf, reference): Distance to reference Pareto front&#xa;  NSGA-II: 0.0000 âœ“ (perfect)&#xa;&#xa;compute_delta(pf): Spread of solutions&#xa;  Lower = better diversity&#xa;&#xa;compute_mn(pf): Count solutions on Pareto front&#xa;  NSGA-II: ~40 solutions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="1120" width="760" height="120" as="geometry" />
        </mxCell>
        
        <!-- Impl Section 5: Baselines -->
        <mxCell id="impl-s5-title" value="5. BASELINE: evaluation/baseline.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1080" y="1260" width="800" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="impl-s5-content" value="single_prompt_baseline(jobs, prompt, probabilities):&#xa;â€¢ Test 4 strategies: simple/standard/fewshot_1/fewshot_3 for ALL jobs&#xa;â€¢ Results: simple: 75.1%, standard: 77.7%, fewshot_1: 79.0%, fewshot_3: 84.1%&#xa;â€¢ Saved to: results/tables/baseline_results.csv" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;fontSize=11;align=left;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="1100" y="1305" width="760" height="80" as="geometry" />
        </mxCell>
        
        
        <!-- Connecting Arrows Between Sections -->
        <mxCell id="arrow1" value="Maps to" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#9673a6;dashed=1;fontSize=14;fontStyle=1" edge="1" parent="1" source="paper-s1-content" target="impl-s1-content">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow2" value="Implements" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#d6b656;dashed=1;fontSize=14;fontStyle=1" edge="1" parent="1" source="paper-s2-step3" target="impl-s2-step3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow3" value="Same algorithms" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#6c8ebf;dashed=1;fontSize=14;fontStyle=1" edge="1" parent="1" source="paper-s3-algos" target="impl-s3-algos">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow4" value="Same metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#82b366;dashed=1;fontSize=14;fontStyle=1" edge="1" parent="1" source="paper-s4-metrics" target="impl-s4-metrics">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Key Differences Box -->
        <mxCell id="diff-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="500" y="1380" width="1000" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="diff-title" value="ðŸ” KEY DIFFERENCES: Paper vs Implementation" style="text;html=1;strokeColor=none;fillColor=#b85450;fontColor=#ffffff;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="520" y="1395" width="960" height="35" as="geometry" />
        </mxCell>
        
        <mxCell id="diff-table-header" value="Aspect            | Paper Theory              | Your Implementation" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="540" y="1440" width="920" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="diff-row1" value="Models/Prompts    | Multiple LLMs             | Single LLM, 4 prompts" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="540" y="1470" width="920" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="diff-row2" value="Dataset           | General NLP tasks         | HDFS anomaly detection" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="540" y="1493" width="920" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="diff-row3" value="LLM API           | OpenAI GPT-3.5/4          | Local Ollama (gemma3)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="540" y="1516" width="920" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="diff-row4" value="Cost measure      | $ per 1K tokens           | Token count (proxy)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="540" y="1539" width="920" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
